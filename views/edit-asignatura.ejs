<% include layout %>
<h2 class="text-center">Editar Asignatura</h2>

<form action="/asignaturas/update/<%= asignatura._id %>" method="POST" class="needs-validation" novalidate>
  <div class="form-group">
    <label for="nombre">Nombre</label>
    <input type="text" name="nombre" class="form-control" id="nombre" value="<%= asignatura.nombre %>" required>
    <div class="invalid-feedback">Por favor, introduce el nombre.</div>
  </div>
  <div class="form-group">
    <label for="curso">Curso</label>
    <input type="text" name="curso" class="form-control" id="curso" value="<%= asignatura.curso %>" required>
    <div class="invalid-feedback">Por favor, introduce el curso.</div>
  </div>
  <div class="form-group">
    <label for="estudio">Estudio</label>
    <select name="estudio" class="form-control" id="estudio" required>
      <% if (estudios && estudios.length > 0) { %>
        <% estudios.forEach(estudio => { %>
          <option value="<%= estudio._id %>" <% if (asignatura.estudio && asignatura.estudio._id.toString() === estudio._id.toString()) { %>selected<% } %>>
            <%= estudio.nombre %> - <%= estudio.tipo %>
          </option>
        <% }) %>
      <% } else { %>
        <option value="" disabled selected>No hay estudios disponibles</option>
      <% } %>
    </select>
    <div class="invalid-feedback">Por favor, selecciona un estudio.</div>
  </div>
  <button type="submit" class="btn btn-primary">Guardar Cambios</button>
</form>

